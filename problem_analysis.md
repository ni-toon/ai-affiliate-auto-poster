# 現在の問題の詳細分析

## 確認された問題

### 1. タイトルにリンクが記述される問題
```
タイトル: https://www.amazon.co.jp/dp/4866801441?tag=ninomono3-22
```
- **問題**: 記事のタイトルにAmazonのURLが設定されている
- **期待値**: 記事の内容に関連した適切なタイトル

### 2. 記事内のプレースホルダー残存問題
```
また、[LINK:改訂版 本当の自由を手に入れる お金の大学]も併せてご検討ください。
また、[LINK:ハーバード、スタンフォード、オックスフォード… 科学的に証明された すごい習慣大百科]も併せてご検討ください。
```
- **問題**: `[LINK:商品名]` プレースホルダーがそのまま記事内に表示
- **期待値**: OGPリンクカード（リッチリンク）として表示

### 3. リンク化処理の失敗
- **問題**: note投稿時のリンク変換処理が正常に動作していない
- **原因**: URL入力位置の誤りやリンク作成プロセスの不具合

## noteでのOGPリンクカード仕様

### 正しいOGPリンクカードの作成方法
1. **単独行でのURL配置**: URLを単独の行に配置することでOGPリンクカードが自動生成される
2. **改行の重要性**: URLの前後に改行を入れることが重要
3. **プレーンテキスト**: URLはプレーンテキストとして配置（リンク化不要）

### 期待される表示形式
```
記事の本文...

https://www.amazon.co.jp/dp/4866801441?tag=ninomono3-22

続きの本文...
```

## 修正が必要な箇所

### 1. タイトル設定処理
- `modules/note_poster.py` の `post_article` メソッド
- タイトル入力時にURLではなく記事タイトルを設定

### 2. プレースホルダー処理
- `modules/article_generator.py` の `insert_affiliate_links` メソッド
- `[LINK:商品名]` を適切なOGPリンクカード形式に変換

### 3. リンク作成処理
- 現在のリンクボタンクリック方式を廃止
- 単純なURL配置方式に変更

## 解決方針

### 1. 記事生成時の改善
- プレースホルダーを `[LINK:商品名]` から適切なURL配置形式に変更
- 商品紹介部分にOGPリンクカードを配置

### 2. note投稿時の改善
- タイトル設定処理を修正
- リンクボタンクリック処理を削除
- プレースホルダーをURLに直接置換

### 3. 処理フローの簡素化
- 複雑なリンク作成処理を削除
- シンプルなURL配置による自動OGPリンクカード生成を活用

