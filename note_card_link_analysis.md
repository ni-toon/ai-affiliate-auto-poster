# noteのカードリンク生成に関する調査結果

## 問題の概要
現在のシステムでは、アフィリエイトURLが生のテキストとして表示され、OGPリンクカード（カードリンク）に変換されていない。

## noteでのカードリンク生成条件

### 基本的な手順（参考: https://note.com/nakao_fintime/n/n57fe01c5d82d）

1. **URLをテキストとしてペーストする**
2. **Enter（改行）をする**
3. **自動的にカードリンクが生成される**

### 重要なポイント

- URLは単独行に配置する必要がある
- URLを入力後、**必ずEnterキーを押す**ことでカードリンクに変換される
- PCやスマホアプリ、ブラウザ版すべてで共通の動作
- カード生成には若干時間がかかる場合がある

### 現在の実装の問題点

1. **記事生成時**: URLは正しく単独行に配置されている ✅
2. **note投稿時**: URLを入力後にEnterキーを押す処理が不足している可能性 ❌

## 修正が必要な箇所

### modules/note_poster.py
- `post_article`メソッドで記事本文を投稿した後
- URLが含まれている行を特定し、その行でEnterキーを押す処理を追加する必要がある

### 具体的な修正方針

1. 記事本文投稿後、URLを含む行を検出
2. 該当行にカーソルを移動
3. Enterキーを押してカードリンクに変換
4. カードリンクの生成を待機

## 参考情報

- Amazonのリンクは価格情報も自動取得される
- 画像やボタン付きのカード形式で表示される
- クリック率向上に効果的

